# Leds | Cibele Infra
  
![Badge em Desenvolvimento](https://img.shields.io/static/v1?label=STATUS&message=EM%20DESENVOLVIMENTO&color=GREEN&style=for-the-badge) 
![image](https://img.shields.io/badge/kubernetes-326ce5.svg?&style=for-the-badge&logo=kubernetes&logoColor=white)

## Error

This section is only intended for the set of errors and proposed solutions.

<hr/>

Esta seção é destinada apenas ao conjunto de erros e soluções propostas.

| Node | Error                                                                                                                                                        | Solution                                                                                                                                                                                                                                                  |
|------|--------------------------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Worker   | Waiting to retrieve agent configuration; server is not ready: Node password rejected, duplicate hostname or contents of '/etc/rancher/node/password          | 1- sudo /usr/local/bin/k3s-agent-uninstall.sh                                                                                                                                                                                                             |
|      |                                                                                                                                                              | 2- sudo rm -f /etc/rancher/node/password                                                                                                                                                                                                                  |
|      |                                                                                                                                                              | 3- realizar o join novamente                                                                                                                                                                                                                              |
| Worker    | Waiting to retrieve agent configuration; server is not ready: CA cert validation failed: Get \"https://127.0.0.1:6444/cacerts\"": context deadline exceeded" | https://drive.google.com/file/d/1gqQSd9c02m4-0-3g1bGxceMtsSxWf_Z-/view?usp=sharing                                                                                                                                                                                                                                                                                                                                                                                                                  |
| Controler    | starting kubernetes: preparing server: init cluster datastore and https: listen tcp :6443: bind: address already in use                                      | Executar: k3s-killall.sh                                                                                                                                                                                                                                  |
| Worker   | Waiting to retrieve agent configuration; server is not ready: failed to get CA certs: Get "https://127.0.0.1:6444/cacerts"""                                 | Verificar: https://github.com/k3s-io/k3s/issues/1395                                                                                                                                                                                                      |
|      |                                                                                                                                                              | Verificar: @brandond, I'm having the exact same problem. However, when running the curl command to get the cacerts, it works perfectly fine. I had the exact same problem with RKE2 as well. Any thoughts as to what could be causing this?               |
|      |                                                                                                                                                              | Update: When I update /etc/systemd/system/k3s-agent.service.env to use the IP address of the manager node, it works fine. It has issues going through the load balancer for some reason but works fine when I use curl to get the cacerts from that node. |
|      |                                                                                                                                                              | Ref: https://github.com/k3s-io/k3s/issues/2852                                                                                                                                                                                                            |
| Controler    | ERRO[0241] unable to verify hash for node 'raspberrypi': hash does not match                                                                                 | set a variável de ambiente K3S_NODE_NAME=master                                                                                                 |
| Worker   | Unable to connect to the server: x509: certificate signed by unknown authority                                                                               | Copiar o arquivo de configuração do master para o worker                                                                                                                                                                                                  |